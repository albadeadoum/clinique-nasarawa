{# templates/utilisateur/param.html.twig (ou templates/param/index.html.twig) #}
{% extends 'base.html.twig' %}

{% block title %}Paramètres{% endblock %}

{% block body %}
<div class="row">
  <div class="col-xl-3 col-md-6">
    <div class="card card-animate">
      <div class="card-body">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1 overflow-hidden">
            <p class="text-uppercase fw-medium text-muted text-truncate mb-0">
              Services Médicaux
            </p>
          </div>
          <div class="flex-shrink-0">
            <h5 class="text-success fs-14 mb-0">
              <i class="ri-settings-3-line fs-13 align-middle"></i>
            </h5>
          </div>
        </div>

        <div class="d-flex align-items-end justify-content-between mt-4">
          <div>
            <h4 class="fs-22 fw-semibold ff-secondary mb-2">
              {{ servicesCount|default(0) }}
            </h4>

            <div class="d-flex gap-2 flex-wrap">
              <button type="button"
                      class="btn btn-sm btn-success"
                      data-bs-toggle="modal"
                      data-bs-target="#addServiceMedicalModal">
                <i class="ri-add-line"></i> Ajouter
              </button>

              <a href="{{ path('app_service_medical_index') }}"
                 class="btn btn-sm btn-outline-primary">
                <i class="ri-list-check"></i> Gérer
              </a>
            </div>
          </div>

          <div class="avatar-sm flex-shrink-0">
            <span class="avatar-title bg-success-subtle rounded fs-3">
              <i class="ri-hospital-line text-success"></i>
            </span>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

{# =========================
   MODAL AJOUT SERVICE MEDICAL (rapide)
   => nécessite une variable "serviceForm" envoyée par le controller
========================= #}
<div class="modal fade" id="addServiceMedicalModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Nouveau Service Médical</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        {% if serviceForm is defined %}
          {{ form_start(serviceForm, {'attr': {'id': 'ServiceMedicalForm'}}) }}
            {{ form_widget(serviceForm) }}
            <div class="d-flex justify-content-end mt-3">
              <button class="btn btn-success">Enregistrer</button>
            </div>
          {{ form_end(serviceForm) }}
        {% else %}
          <div class="alert alert-warning mb-0">
            Le formulaire ServiceMedical n’est pas chargé. Ajoute <code>serviceForm</code> dans le controller.
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}